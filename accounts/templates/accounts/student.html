<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Student Portal</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-5">

  <!-- -------------------------------
       Student Details Section
       ------------------------------- -->
  <div class="card shadow p-4 mb-5">
    <h2 class="mb-3">Student Details</h2>

    <form method="POST" action="">
      {% csrf_token %}
      {{ form.as_p }}
      <input type="hidden" name="save_student" value="1">
      <button type="submit" class="btn btn-primary">Save</button>
    </form>
  </div>

  <!-- -------------------------------
       Concession Application Section
       ------------------------------- -->
  <div class="card shadow p-4">
    <h3 class="mb-3">Apply for Railway Concession</h3>

    <!-- âœ… Display messages -->
    {% if messages %}
      <div>
        {% for message in messages %}
          <div class="alert alert-{{ message.tags }}">{{ message }}</div>
        {% endfor %}
      </div>
    {% endif %}

    <form method="POST" action="">
      {% csrf_token %}
      <input type="hidden" name="apply_concession" value="1">

      <div class="mb-3">
        <label for="classType" class="form-label">Class</label>
        <select id="classType" name="class_type" class="form-select" required>
          <option value="first">First Class</option>
          <option value="second">Second Class</option>
          <option value="ac">AC Class</option>
        </select>
      </div>

      <div class="mb-3">
        <label for="period" class="form-label">Period</label>
        <select id="period" name="period" class="form-select" required>
          <option value="monthly">Monthly</option>
          <option value="quarterly">Quarterly</option>
        </select>
      </div>

      <div class="mb-3">
        <label for="line" class="form-label">Railway Line</label>
        <select id="line" name="line" class="form-select" onchange="updateStations()" required>
          <option value="">Select Line</option>
          <option value="central">Central</option>
          <option value="western">Western</option>
          <option value="harbour">Harbour</option>
          <option value="trans-harbour">Trans-Harbour</option>
          <option value="other">Other</option>
        </select>
      </div>

      <div class="mb-3">
        <label for="fromStation" class="form-label">From Station</label>
        <select id="fromStation" name="from_station" class="form-select" required>
          <option value="">Select Station</option>
        </select>
      </div>

      <div class="mb-3">
        <label for="toStation" class="form-label">To Station</label>
        <input type="text" id="toStation" name="to_station" class="form-control" value="Wadala" readonly>
      </div>

      <button type="submit" class="btn btn-success">Submit Application</button>
    </form>
  </div>

  <script>
  // --- station list defined globally ---
  const stationData = {
    central: ["CSMT","Masjid","Sandhurst Road","Byculla","Chinchpokli","Currey Road","Parel",
      "Dadar","Matunga","Sion","Kurla","Vidyavihar","Ghatkopar","Vikhroli","Kanjur Marg",
      "Bhandup","Nahur","Mulund","Thane","Kalva","Mumbra","Diva Jn","Kopar",
      "Dombivli","Thakurli","Kalyan","Vithalwadi","Ulhas Nagar","Ambarnath","Badlapur",
      "Vangani","Shelu","Neral","Bhivpuri Road","Karjat","Palasdhari","Kelavli","Dolavli",
      "Lowjee","Khopoli","Shahad","Ambivli","Titwala","Khadavli","Vasind","Asangaon",
      "Atgaon","Thansit","Khardi","Umbermali","Kasara"],
    western: ["Churchgate","Marine Lines","Charni Road","Grant Road","Mumbai Central","Mahalakshmi",
      "Lower Parel","Prabhadevi","Dadar","Matunga Road","Mahim Jn","Bandra","Khar Road",
      "Santa Cruz","Vile Parle","Andheri","Jogeshwari","Ram Mandir","Goregaon","Malad",
      "Kandivali","Borivali","Dahisar","Mira Road","Bhayandar","Naigaon","Vasai",
      "Nala Sopara","Virar","Vaitarana","Saphale","Kelve Road","Palghar","Umroli","Boisar",
      "Vangaon","Dahanu Road"],
    harbour: ["CSMT","Masjid","Sandhurst Road","Dockyard Road","Reay Road","Cotton Green","Sewri",
      "Wadala","Kings Circle","Mahim Jn","Bandra","Khar Road","Santa Cruz","Vile Parle",
      "Andheri","Jogeshwari","Ram Mandir","Goregaon","GTB Nagar","Chunabhatti","Kurla",
      "Tilaknagar","Chembur","Govandi","Mankhurd","Vashi","Sanpada","Juinagar","Nerul",
      "Seawoods-Darave","Belapur CBD","Kharghar","Manasarovar","Khandeshwar","Panvel"],
    "trans-harbour": ["Thane","Digha Gaon","Airoli","Rabale","Ghansoli","Koparkhairane","Turbhe","Sanpada",
      "Vashi","Juinagar","Nerul","Seawoods-Darave","Belapur CBD","Kharghar","Manasarovar",
      "Khandeshwar","Panvel"],
    other: []
  };

  function updateStations() {
    const line = document.getElementById("line").value;
    const fromStation = document.getElementById("fromStation");
    fromStation.innerHTML = "<option value=''>Select Station</option>";
    const stations = stationData[line] || [];
    stations.forEach(station => {
      const option = document.createElement("option");
      option.value = station;
      option.text = station;
      fromStation.appendChild(option);
    });
  }
  </script>

</body>
</html>
